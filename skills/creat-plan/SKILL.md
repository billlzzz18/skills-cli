---
name: create-plan (สร้างแผนงาน)
คำอธิบาย: สร้างแผนการดำเนินงานอย่างละเอียดสำหรับงานที่มีความซับซ้อน โดยจะสร้างแผนยุทธศาสตร์ที่ครอบคลุมในรูปแบบ Markdown ซึ่งประกอบด้วย วัตถุประสงค์, ขั้นตอนการดำเนินงานทีละขั้นตอนในรูปแบบ Checkbox, เกณฑ์การตรวจสอบ, การประเมินความเสี่ยง และแนวทางทางเลือก แผนงานทั้งหมด ต้อง ได้รับการตรวจสอบความถูกต้องโดยใช้สคริปต์ตรวจสอบ (validation script) ที่กำหนดไว้ ใช้เมื่อผู้ใช้ต้องการการวิเคราะห์อย่างถี่ถ้วนและการวางแผนที่เป็นระบบก่อนเริ่มดำเนินการ, เมื่อต้องการย่อยฟีเจอร์ที่ซับซ้อนให้เป็นขั้นตอนที่ปฏิบัติได้จริง หรือเมื่อผู้ใช้ร้องขอแผนงาน (Plan), แผนที่นำทาง (Roadmap) หรือกลยุทธ์ (Strategy) โดยตรง เน้นเฉพาะการวางแผนเท่านั้นและไม่มีการแก้ไขโค้ดใดๆ
---

# สร้างแผนการดำเนินงาน (Create Implementation Plan)
 
สร้างแผนการดำเนินงานที่ครอบคลุมเพื่อให้คำแนะนำเชิงกลยุทธ์ โดยไม่มีการเปลี่ยนแปลงโค้ดจริง
 
## ควรใช้เมื่อใด
 
- เมื่อผู้ใช้ร้องขอแผนงาน, แผนที่นำทาง หรือกลยุทธ์การดำเนินงานอย่างชัดเจน
- งานที่มีความซับซ้อนซึ่งจำเป็นต้องมีการย่อยโครงสร้างก่อนเริ่มดำเนินการ
- เมื่อต้องการการประเมินความเสี่ยงและการวิเคราะห์แนวทางเลือก
- การวิเคราะห์การตัดสินใจด้านสถาปัตยกรรม (Architectural decisions) ก่อนเริ่มดำเนินการ
 
## กระบวนการวางแผน
 
1. การประเมินเบื้องต้น
 
สำรวจฐานโค้ด (Codebase) เพื่อทำความเข้าใจ:
 
- โครงสร้างและการจัดระเบียบของโปรเจกต์
- ไฟล์และส่วนประกอบที่เกี่ยวข้อง - อ่านอย่างละเอียดเพื่อให้เข้าใจขั้นตอนการทำงานทั้งหมด
- รูปแบบ (Patterns) และข้อกำหนด (Conventions) ที่มีอยู่เดิม
- ความท้าทายและความเสี่ยงที่อาจเกิดขึ้น
- การไหลของข้อมูล (Data flows) ตั้งแต่จุดเริ่มต้นจนถึงการใช้งานสุดท้าย
 
ใช้เครื่องมือ  search ,  sem_search  และ  read  เพื่อตรวจสอบฐานโค้ด หากต้องการการค้นคว้าที่ลึกซึ้งขึ้นสำหรับกรณีการใช้งานนั้นๆ ให้ใช้  sage  และระบุแหล่งที่มาโดยใช้รูปแบบ  filepath:line  ในแผนงานของคุณอย่างชัดเจน
 
2. สร้างแผนยุทธศาสตร์
 
สร้างไฟล์แผนงานในรูปแบบ Markdown ในไดเรกทอรี  plans/  โดยตั้งชื่อตามรูปแบบ:  plans/{YYYY-MM-DD}-{ชื่อชื่อของงาน}-v{N}.md 
 
ตัวอย่าง:  plans/2025-11-24-add-auth-v1.md 
 
3. ตรวจสอบความถูกต้องของแผน
 
ข้อบังคับ: เรียกใช้สคริปต์ตรวจสอบเพื่อให้แน่ใจว่าแผนงานเป็นไปตามข้อกำหนดทั้งหมด:
 
bash  
./.forge/skills/create-plan/validate-plan.sh plans/{YYYY-MM-DD}-{ชื่อชื่อของงาน}-v{N}.md
 
 
แก้ไขข้อผิดพลาดหรือคำเตือนใดๆ และตรวจสอบซ้ำจนกว่าแผนงานจะผ่านการตรวจสอบทั้งหมด
 
4. โครงสร้างแผนงาน
 
markdown  
# [ชื่อของงาน]

## วัตถุประสงค์ (Objective)

[ระบุเป้าหมายและผลลัพธ์ที่คาดหวังให้ชัดเจน]

## แผนการดำเนินงาน (Implementation Plan)

- [ ] 1. [งานแรกพร้อมคำอธิบายรายละเอียดและเหตุผลประกอบ]
- [ ] 2. [งานที่สองพร้อมคำอธิบายรายละเอียดและเหตุผลประกอบ]
- [ ] 3. [งานที่สามพร้อมคำอธิบายรายละเอียดและเหตุผลประกอบ]

## เกณฑ์การตรวจสอบ (Verification Criteria)

- [เกณฑ์ที่ 1: ผลลัพธ์ที่เฉพาะเจาะจงและวัดผลได้]
- [เกณฑ์ที่ 2: ผลลัพธ์ที่เฉพาะเจาะจงและวัดผลได้]

## ความเสี่ยงที่อาจเกิดขึ้นและการบรรเทาผลกระทบ (Potential Risks and Mitigations)

1. **[คำอธิบายความเสี่ยง]**
   การบรรเทา: [กลยุทธ์การบรรเทาผลกระทบที่เฉพาะเจาะจง]

2. **[คำอธิบายความเสี่ยง]**
   การบรรเท: [กลยุทธ์การบรรเทาผลกระทบที่เฉพาะเจาะจง]

## แนวทางทางเลือก (Alternative Approaches)

1. [ทางเลือกที่ 1]: [คำอธิบายสั้นๆ และข้อดีข้อเสีย]
2. [ทางเลือกที่ 2]: [คำอธิบายสั้นๆ และข้อดีข้อเสีย]
 
 
## ข้อกำหนดที่สำคัญ
 
- ต้องตรวจสอบแผนเสมอ โดยใช้  ./.forge/skills/create-plan/validate-plan.sh  หลังจากสร้างเสร็จ
- ต้องใช้รูปแบบ Checkbox เสมอ ( - [ ] ) สำหรับงานในส่วนแผนการดำเนินงาน "ทั้งหมด"
- ห้ามใช้รายการแบบตัวเลข หรือจุดไข่ปลาธรรมดาในส่วนแผนการดำเนินงาน
- ห้ามเขียนโค้ด, ส่วนของโค้ด (Snippets) หรือตัวอย่างโค้ด ลงในแผนงานเด็ดขาด
- เขียนงานให้ครอบคลุม ซึ่งรวมถึง ทำอะไร, ทำไมถึงต้องทำ, ไฟล์ที่ได้รับผลกระทบ และจุดที่ต้องเชื่อมต่อ
- ใช้รูปแบบ  filepath:line  สำหรับการอ้างอิงไฟล์ (เช่น  crates/forge_repo/src/provider.rs:45 )
- ระบุเหตุผลที่ชัดเจนสำหรับแต่ละงาน
- ระบุเกณฑ์การตรวจสอบที่เฉพาะเจาะจงและวัดผลได้
- บันทึกข้อสันนิษฐานต่างๆ ที่ทำขึ้นสำหรับข้อกำหนดที่คลุมเครือ
- มุ่งเน้นไปที่ "ทำอะไร" และ "ทำไม" ในเชิงกลยุทธ์ ไม่ใช่ "ทำอย่างไร" ในเชิงเทคนิค
- อธิบายสิ่งที่ต้องทำด้วยภาษาธรรมชาติ (Natural language) ไม่ใช่ใช้โค้ด
 
## แนวทางปฏิบัติที่ดีที่สุด (Best Practices)
 
- ตั้งข้อสันนิษฐานที่สมเหตุสมผลเมื่อข้อกำหนดมีความคลุมเครือ
- ใช้รูปแบบที่มีอยู่ในฐานโค้ดเพื่ออนุมานแนวทางปฏิบัติที่ดีที่สุด
- เสนอเส้นทางการแก้ไขปัญหาหลายรูปแบบสำหรับความท้าทายที่ซับซ้อน
- สร้างความสมดุลระหว่างความละเอียดถี่ถ้วนและความสามารถในการนำไปปฏิบัติจริง
- สร้างแผนงานที่ตัวแทนผู้ดำเนินการ (Implementation agents) สามารถทำตามได้ทีละขั้นตอน
 
## ขอบเขต (Boundaries)
 
นี่คือทักษะสำหรับ การวางแผนเท่านั้น:
 
- ✅ สำรวจฐานโค้ดและวิเคราะห์โครงสร้าง
- ✅ สร้างแผนยุทธศาสตร์และเอกสารประกอบ
- ✅ ประเมินความเสี่ยงและนำเสนอทางเลือก
- ✅ อธิบายขั้นตอนการดำเนินงานโดยใช้ภาษาธรรมชาติ
- ❌ แก้ไขโค้ดจริง
- ❌ แก้ไขไฟล์หรือสร้างส่วนงานจริง
- ❌ รันการทดสอบ (Tests) หรือคำสั่ง Build
- ❌ เขียนโค้ด, Snippets หรือตัวอย่างโค้ดในแผนงาน
 
หากผู้ใช้ร้องขอการลงมือทำ (Implementation) ให้แนะนำให้เปลี่ยนไปใช้ตัวแทนผู้ดำเนินการ (Implementation agent) แทน